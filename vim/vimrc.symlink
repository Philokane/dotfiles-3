" enable all features
set nocompatible

let mapleader=" "

set mouse=a

set autoread

set noswapfile

set lazyredraw

source ~/.dotfiles/vim/autoload/pathogen.vim
execute pathogen#infect('bundle/{}', '~/.dotfiles/vim/bundle/{}')

" Wrap too long lines
set wrap
set lbr " wrap by word
set display=lastline " show partial lines

" Tabs are 2 characters
set tabstop=2

" (Auto)indent uses 2 characters
set shiftwidth=2

" spaces instead of tabs
set expandtab

" guess indentation
set autoindent
set copyindent
set preserveindent

" Expand the command line using tab
set wildchar=<Tab>

" show line numbers
set number

set ignorecase
set smartcase

" Fold using markers {{{
" like this
" }}}
set foldmethod=marker

" powerful backspaces
set backspace=indent,eol,start

" highlight the searchterms
set hlsearch

" jump to the matches while typing
set incsearch

" don't wrap words
set textwidth=0

" history
set history=50

" 1000 undo levels
set undolevels=1000

" show partial commands
set showcmd

" show matching braces
set showmatch

" don't leave backup files lying around after vim has closed
set nobackup
" workaround for `crontab -e` not working
set backupskip=/tmp/*,/private/tmp/*

" hide buffers rather than closing them
set hidden

" ignore some more uneditable files
set wildignore+=.git,.svn,*.pyc,*.o,*.beam
set wildignore+=*.png,*.mng,*.jpg,*.jpeg,*.gif,*.bmp,*.pdf,*.class,*.hi,tmp/**

if v:version >= 703
  " VIM 7.3 stuff

  " persistent undo
  set undofile
  set undodir=~/.vimundo
endif

" filetype detecting and syntax highlighting
filetype off
filetype plugin indent on

syntax enable

if has("gui_running")
  set columns=85
  set lines=55
endif

" highlight the 80th column
set colorcolumn=80

" GVIM stuff
set guioptions-=T " no toolbar
set guioptions-=m " no menu
" on separate lines due to MacVim bug:
set guioptions-=r " no right scrollbar
set guioptions-=l " no left scrollbar
set guioptions-=L " also no left scrollbar
set guioptions-=b " no bottom scrollbar

syntax enable
set background=dark
colorscheme solarized

cnoremap %% <C-R>=expand('%:h').'/'<cr>

let NERDTreeShowHidden=1
nmap <Leader>d :NERDTreeToggle<CR>
nmap <Leader>t :CtrlP<CR>
nmap <Leader>h :nohl<CR>

set clipboard=unnamed
set background=dark
colorscheme solarized
